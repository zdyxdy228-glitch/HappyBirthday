
# Happy Birthday — 交互式电子贺卡

一个基于浏览器的交互式生日惊喜页面，使用 Three.js 的粒子特效和 MediaPipe 手势/音频检测实现的“吹蜡烛”“翻卡片”等互动体验。

**演示场景**：在浏览器中打开项目（推荐使用 VS Code 的 `Live Server`），进入后允许使用摄像头和麦克风以体验完整交互。

**关键技术**：
- **Three.js**：渲染粒子、场景与相机
- **MediaPipe (Hands)**：手势检测（用于自动进入或触发倒计时）
- **Web Audio API**：麦克风音量分析，实现“吹气”检测
- **Tailwind CSS**：UI 快速样式

**功能亮点**：
- 可拖拽/旋转的 3D 粒子场景（蛋糕/文字形状）
- 启动页与自动倒计时，支持手势触发进入
- 使用麦克风或空格键/长按屏幕模拟“吹蜡烛”动作
- 吹满进度后触发庆祝动画并展示可翻转的祝福卡片
- 可在运行时通过右上角的配色面板调节蛋糕颜色
- 最后收起卡片后的蛋糕旋转不仅可以通过滑动鼠标，还能通过手部识别来实现。

**要求**
- 现代浏览器（Chrome / Edge / Firefox 等，建议最新版）
- 若需摄像头或手势检测：支持摄像头的设备与浏览器
- 若需“吹气”交互：设备麦克风权限或使用空格/触摸代替

注意：直接用 `file://` 打开 HTML 文件会受到浏览器策略限制（摄像头/麦克风可能不可用）。请使用 `Live Server` 或任意本地静态服务器运行。

**快速开始（使用 VS Code）**

1. 在 VS Code 中打开本项目目录（包含 `index.html`）。
2. 安装并启用扩展 `Live Server`（如尚未安装）。
3. 在 `index.html` 上右键选择 `Open with Live Server`。

或者在项目根目录运行一个简单的静态服务器（PowerShell 示例）：

```powershell
# 如果已安装 npm: 以 http-server 为例
npx http-server -c-1 . -p 5500
# 然后在浏览器访问 http://localhost:5500/index.html
```

打开页面后：
- 点击“进入”按钮并允许摄像头/麦克风权限（仅在需要时）。
- 等待加载完成后，页面会进入 IDLE 状态；未检测到手势时会自动倒计时并进入互动模式。

**文件结构 (重要文件)**
- `index.html` — 主页面，包含所有前端逻辑与样式
- `src/` — 资源目录（音频、图标、图片等）
- `show/` — 备用

**自定义与开发提示**
- 配色：页面右上 `settings` 面板允许实时修改 `底层颜色`/`顶层颜色`/`奶油颜色`。
- 粒子数量与性能：`index.html` 中 `VISUAL_CONFIG.particleCount` 根据是否为移动设备有不同默认值，调小可提高性能。
- 当在本地开发并需要调试摄像头/麦克风时，务必通过 `http(s)` 服务提供页面以避免浏览器权限限制。

**已使用的第三方资源**
- Three.js
- MediaPipe Hands
- Tailwind CSS
- Google Fonts

**常见问题**
- Q：为什么页面提示“file://”并禁用摄像头？
	- A：浏览器出于安全策略禁止本地文件直接访问摄像头/麦克风，请使用 `Live Server` 或本地静态服务器。
- Q：麦克风不灵敏怎么办？
	- A：可按住空格键或在移动端长按屏幕以替代吹气检测；也可在操作系统或浏览器中检查麦克风权限与输入增益。





## 在线演示

项目已部署示例（Netlify）： https://happybirthdayhyl.netlify.app/

请注意：在线演示加载速度在国内可能较慢，如有条件建议使用代理来加速资源加载。

## 已知问题与移动端建议

以下是当前测试中在移动端（尤其是安卓）观察到的问题与建议：

- **安卓摄像头/麦克风权限问题**：部分安卓设备或浏览器会阻止页面直接访问摄像头与麦克风，表现为无法弹出权限授权或授权后仍不可用。

- **音乐通过听筒播放（声音从听筒而非扬声器）**：部分手机/浏览器会将音频输出路由到听筒，导致声音较小。

- **总体建议**：推荐使用桌面浏览器体验（Chrome/Edge 最新版），在移动端测试时优先使用 Chrome 并通过浏览器地址栏的「站点信息」检查并开启摄像头/麦克风权限；如网络慢，建议使用稳定的代理，以加速第三方库（CDN）加载。在PC网页端效果是最好的测试下来，基本没有什么bug。